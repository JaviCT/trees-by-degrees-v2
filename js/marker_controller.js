!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElementWithClassName=function(e,t){var r=document.createElement(e);return r.className=t,r},i=t.createButtonWithClassName=function(e){return n("button",e)},o=t.createDivWithClassName=function(e){return n("div",e)},a=t.createInputWithClassName=function(e){return n("input",e)},s=(t.addButtonWithClassName=function(e,t,r,n){var o=i(e);return o.onclick=r,n&&(o.innerHTML=n),t.appendChild(o),o},t.addDivWithClassName=function(e,t,r){var n=o(e);if(r){var i=document.createTextNode(r);n.appendChild(i)}return t.appendChild(n),n},t.addTextInputWithClassName=function(e,t){var r=a(e);return r.type="text",t.appendChild(r),r},t.ensureProtocolInUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return 0===e.search("https://")||0===e.search("http://")||0===e.search("mailto:")?e:t?"https://"+e:"http://"+e});t.formatUrl=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return-1===e.search(t)&&(e=r+e),s(e,n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(5)),o=a(r(9));function a(e){return e&&e.__esModule?e:{default:e}}i.default.polyfill();var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl="https://cdn-webgl.wrld3d.com/wrld-search/latest/",this._searchTagsJsonUrl=this._baseUrl+"tags/search_tags.json",this._allTags={},this._allIconKeys=[],this._defaultIconKey="",this._fetchTags()}return n(e,[{key:"getAllTags",value:function(){return JSON.parse(JSON.stringify(this._allTags))}},{key:"getIconUrlForKey",value:function(e){return this._baseUrl+"assets/js/icon1_"+e+".png"}},{key:"getIconKeys",value:function(){if(0===this._allIconKeys.length)for(var e in this._allTags){var t=this._allTags[e];-1===this._allIconKeys.indexOf(t.iconKey)&&this._allIconKeys.push(t.iconKey)}return this._allIconKeys.slice()}},{key:"getDefaultIconKey",value:function(){return this._defaultIconKey}},{key:"getSearchTags",value:function(){return Object.keys(this._allTags)}},{key:"getHumanReadable",value:function(e){return e in this._allTags?this._allTags[e].name:this._getHumanReadable(e)}},{key:"getHumanReadablesFromTagsString",value:function(e){var t=this;return e.split(" ").map(function(e){return t.getHumanReadable(e)})}},{key:"convertHumanReadableToTag",value:function(e){return e.trim().toLowerCase().split(" ").join("_")}},{key:"getIconKey",value:function(e){return e in this._allTags?this._allTags[e].iconKey:this._defaultIconKey}},{key:"getIconKeyFromTagsString",value:function(e){var t=this,r=e.split(" ").find(function(e){return void 0!==t._allTags[e]});return this.getIconKey(r)}},{key:"getHumanReadablesMapFromTagsString",value:function(e){var t=this,r=e.split(" "),n={};return r.forEach(function(e){n[e]=t.getHumanReadable(e)}),n}},{key:"isSearchTagValid",value:function(e){return/^[a-z_]+$/.test(e)}},{key:"filterSearchTagsByHumanReadables",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.split(" "),i=[];for(var o in this._allTags){var a=this._allTags[o];this._matchStringsToHumanReadable(n,a.name)&&i.push(o)}return r.forEach(function(e){t._matchStringsToHumanReadable(n,t.getHumanReadable(e))&&i.push(e)}),i}},{key:"filterIconKeysByHumanReadables",value:function(e){var t=e.split(" "),r=[];for(var n in this._allTags){var i=this._allTags[n];-1===r.indexOf(i.iconKey)&&(this._matchStringsToHumanReadable(t,i.name)&&r.push(i.iconKey))}return r}},{key:"_fetchTags",value:function(){var e=this;return(0,o.default)(this._searchTagsJsonUrl).then(function(e){return e.json()}).then(function(t){t.tags.forEach(function(t){e._allTags[t.tag]={name:t.readable_tag,iconKey:t.icon_key}}),e._defaultIconKey=t.default_icon_key})}},{key:"_capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"_matchStringsToHumanReadable",value:function(e,t){return e.some(function(e){if(0===e.length)return!1;var r=t.toLowerCase().indexOf(e.toLowerCase());return-1!==r&&(0===r||" "===t.charAt(r-1))})}},{key:"_getHumanReadable",value:function(e){var t=this;return e.toLowerCase().split("_").map(function(e){return t._capitalize(e)}).join(" ")}}]),e}());t.default=s},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(r(3)),o=c(r(4)),a=c(r(1)),s=r(11),u=r(12),l=r(13);function c(e){return e&&e.__esModule?e:{default:e}}var d={poiViewsEnabled:!1,ignoreTags:[],skipPoiCard:!1,customViewDataDeliveryMethod:"query_string",customViewDefaultHeight:void 0,customViewScrollingEnabled:!1},f=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._map=e,n._options=Object.assign({},d,r),n._markers={},n._markersPendingDelete={},n._selectedMarkerId=null,n._hasAnchors=n._shouldHaveAnchors(),n._animationKeys=["appear","disappear"],n._map.on("update",n._onUpdate.bind(n)),n._map.on("zoom",n._updateAnchors.bind(n)),n._map.on("tilt",n._updateAnchors.bind(n)),n._searchbarSubscriber=null,n._addMarkerForSearchResult=n._addMarkerForSearchResult.bind(n),n._removeMarkerForSearchResult=n._removeMarkerForSearchResult.bind(n),n._updateMarkerZIndexOffset=n._updateMarkerZIndexOffset.bind(n),"searchbar"in n._options&&(n._searchbarSubscriber=new o.default(n._options.searchbar,n._addMarkerForSearchResult,n._removeMarkerForSearchResult,n._updateMarkerZIndexOffset)),n._markerIdToZIndexOffset={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"addMarker",value:function(e,t,r){var n=this._createMarker(e,L.latLng(t),r);return n&&(this._showMarker(n),this._markerIdToZIndexOffset[e]=r.zIndexOffset),n}},{key:"removeMarker",value:function(e){var t=this._getMarker(e);return t&&(this._hideMarker(t,!0),delete this._markerIdToZIndexOffset[t.id]),t}},{key:"removeAllMarkers",value:function(){var e=this;Object.keys(this._markers).forEach(function(t){e.removeMarker(t)})}},{key:"showMarker",value:function(e){var t=this._getMarker(e);return t&&this._showMarker(t),t}},{key:"hideMarker",value:function(e){var t=this._getMarker(e);return t&&this._hideMarker(t),t}},{key:"selectMarker",value:function(e){var t=this._getMarker(e);return t&&(this._isMarkerSelected(t)||(this.deselectMarker(),this._selectedMarkerId=t.id,t.setZIndexOffset(1e3),this._updateMarkerIcon(t))),t}},{key:"deselectMarker",value:function(){var e=this._getMarker(this._selectedMarkerId);this._selectedMarkerId=null,e&&(this._updateMarkerIcon(e),e.setZIndexOffset(this._markerIdToZIndexOffset[e.id]))}},{key:"moveMarker",value:function(e,t){var r=this._getMarker(e);return r&&r.setLatLng(t),r}},{key:"updateMarker",value:function(e,t){var r=this._getMarker(e);if(!r)return r;if(null==t)return r;if("lat"in t||"lng"in t){var n=void 0===t.lat?r.getLatLng().lat:t.lat,i=void 0===t.lng?r.getLatLng().lng:t.lng;r.setLatLng(L.latLng(n,i))}if("iconKey"in t&&this._updateMarkerIcon(r,t.iconKey),"elevation"in t&&r.setElevation(t.elevation),"elevationMode"in t&&r.setElevationMode(t.elevationMode),!("isIndoor"in t||"indoorId"in t||"floorIndex"in t))return r;if(!1===t.isIndoor)return r.setOutdoor(),r;var o=void 0!==t.indoorId?t.indoorId:r.options.indoorMapId;if(void 0===o)return r;var a=r.options.indoorMapFloorId,s=void 0!==t.floorIndex?t.floorIndex:r.options.indoorMapFloorIndex;return void 0!==a?r.setIndoorMapWithFloorId(o,a):void 0!==s&&r.setIndoorMapWithFloorIndex(o,s),r}},{key:"getAllMarkerIds",value:function(){return Object.keys(this._markers)}},{key:"getMarker",value:function(e){return this._getMarker(e)}},{key:"_tags_in_ignore_list",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(this._options.ignoreTags.includes(r))return!0}return!1}},{key:"_addMarkerForSearchResult",value:function(e,t,r){if(this.fire("beginsearchresultaddmarker",{result:t}),!t.data.tags||!this._tags_in_ignore_list(t.data.tags.split(" "))){var n=t.location.latLng,i={};"elevation"in t.location&&(i.elevation=t.location.elevation),"isIndoor"in t.location&&(i.isIndoor=t.location.isIndoor),"indoorId"in t.location&&(i.indoorId=t.location.indoorId),"floorIndex"in t.location&&(i.floorIndex=t.location.floorIndex),"iconKey"in t&&(i.iconKey=t.iconKey),this._options.poiViewsEnabled&&(i.poiView=t),i.zIndexOffset=r;var o=this.addMarker(e,n,i);this.fire("searchresultaddmarker",{marker:o,result:t})}}},{key:"_updateMarkerZIndexOffset",value:function(e,t){var r=this._getMarker(e);r&&r.setZIndexOffset(t)}},{key:"_removeMarkerForSearchResult",value:function(e,t){var r=this.removeMarker(e);this.fire("searchresultremovemarker",{marker:r,sourceId:t})}},{key:"_getMarker",value:function(e){if("number"==typeof e||"string"==typeof e){if(this._searchbarSubscriber){var t=this._searchbarSubscriber.getLocalIdFromSourceId(e);return null!==t?this._markers[t]:this._markers[e]}return e in this._markers?this._markers[e]:null}return null!==e&&this._markers[e.id]===e?e:null}},{key:"_convertMarkerControllerToWrldJsMarkerOptions",value:function(e){var t=JSON.parse(JSON.stringify(e));return!1===t.isIndoor||(this._map.indoors.isIndoors()&&("indoorId"in t||(t.indoorId=this._map.indoors.getActiveIndoorMap().getIndoorMapId()),"floorIndex"in t||(t.indoorMapFloorId=this._map.indoors.getFloor()._getFloorId())),"indoorId"in t&&(t.indoorMapId=t.indoorId),"floorIndex"in t&&(t.indoorMapFloorIndex=t.floorIndex)),delete t.isIndoor,delete t.indoorId,delete t.floorIndex,t}},{key:"_createMarker",value:function(e,t,r){var n=this;if(e in this._markers)return null;var i=r||{},o=this._convertMarkerControllerToWrldJsMarkerOptions(i),a=L.marker(t,o);return"iconKey"in o&&(a.iconKey=o.iconKey),a.visible=!1,a.isAnimating=!1,a.oneTimeAnimationEndCallback=null,a.dragEndCallback=null,a.anchorAnimatingCallback=null,a.id=e,a.isBeingDragged=!1,a.isAnchorAnimating=!1,a.on("add",function(e){n._animateMarker(a,"appear"),a.visible=!0}),a.on("click",function(e){n._options.skipPoiCard&&n.openPoiView(a)}),a.on("dragstart",function(e){a.isBeingDragged=!0}),a.on("dragend",function(e){a.isBeingDragged=!1,a.dragEndCallback&&(a.dragEndCallback(),a.dragEndCallback=null)}),this._options.poiViewsEnabled&&this._createPoiViewForMarker(a,o),this._markers[e]=a,a}},{key:"_isMarkerSelected",value:function(e){return e.id===this._selectedMarkerId}},{key:"_showMarker",value:function(e){e.visible||(this._updateMarkerIcon(e,void 0,!1),e.addTo(this._map))}},{key:"_hideMarker",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e.visible||r)&&(this._isMarkerOnMap(e)&&void 0!==e.iconKey&&e.visible?(this._updateMarkerIcon(e,void 0,!1),this._animateMarker(e,"disappear",function(){t._removeMarkerFromMap(e)})):this._removeMarkerFromMap(e),r&&this._addMarkerForDeletion(e))}},{key:"_removeMarkerFromMap",value:function(e){this._map.removeLayer(e),e.visible=!1}},{key:"_addMarkerForDeletion",value:function(e){var t=e.id;null!==this._searchbarSubscriber&&this._searchbarSubscriber.removeMarker(t),this._markersPendingDelete[t]=e,delete this._markers[t]}},{key:"_onUpdate",value:function(){var e=this;Object.keys(this._markersPendingDelete).forEach(function(t){var r=e._markersPendingDelete[t];e._isMarkerOnMap(r)||(e._map.removeLayer(r),delete e._markersPendingDelete[t])})}},{key:"_updateAnchors",value:function(e){var t=this;if(this._hasAnchors!==this._shouldHaveAnchors()){this._hasAnchors=this._shouldHaveAnchors();var r=function(e){var r=t._markers[e];t._isMarkerOnMap(r)&&(t._hasAnchors&&!$(r.getElement()).hasClass("has-anchor")?(r.isAnchorAnimating=!0,$(r.getElement()).addClass("has-anchor"),$(r.getElement()).bind("transitionend",function(){r.isAnchorAnimating=!1,r.anchorAnimatingCallback&&(r.anchorAnimatingCallback(),r.anchorAnimatingCallback=null),t._updateMarkerIcon(r)})):$(r.getElement()).hasClass("has-anchor")&&(r.isAnchorAnimating=!0,$(r.getElement()).removeClass("has-anchor"),$(r.getElement()).bind("transitionend",function(){r.isAnchorAnimating=!1,r.anchorAnimatingCallback&&(r.anchorAnimatingCallback(),r.anchorAnimatingCallback=null),t._updateMarkerIcon(r)})))};for(var n in this._markers)r(n);this._updateMarkerPopupOffset()}}},{key:"_shouldHaveAnchors",value:function(){return this._map.getCameraPitchDegrees()<60}},{key:"_updateMarkerIcon",value:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e.iconKey){void 0!==t&&(e.iconKey=t);var i=function(e,t,r){var n=null!==r,i="eegeo-marker"+(e?" selected":"")+(t?" has-anchor":""),o="eegeo-marker-body"+(n?" has-icon":""),s=a.default.getIconUrlForKey(r),u="<div class='eegeo-marker-container'>                 <div class='"+o+"'></div>                 <div class='eegeo-marker-anchor'></div>                 <div class='eegeo-marker-pin-icon'"+(n?" style='background-image: url("+s+")'":"")+"</div>                 </div>";return L.divIcon({className:i,iconSize:null,html:u})}(this._isMarkerSelected(e),this._hasAnchors,e.iconKey);n&&e.isAnimating?e.oneTimeAnimationEndCallback=function(){r._setIcon(e,i)}:this._setIcon(e,i)}}},{key:"_setIcon",value:function(e,t){e.isAnchorAnimating||(e.dragEndCallback=null,e.anchorAnimatingCallback=null,e.isBeingDragged?e.isBeingDragged&&(e.dragEndCallback=function(){e.setIcon(t)}):e.setIcon(t))}},{key:"_animateMarker",value:function(e,t,r){if(this._isMarkerOnMap(e)){var n=e.getElement().childNodes[0];this._animationKeys.forEach(function(e){$(n).removeClass(e)}),$(n).addClass(t),e.isAnimating=!0,$(n).bind("animationend",function(){e.isAnimating=!1,e.oneTimeAnimationEndCallback&&(e.oneTimeAnimationEndCallback(),e.oneTimeAnimationEndCallback=null),r&&r()})}}},{key:"_isMarkerOnMap",value:function(e){return null!==e.getElement()&&void 0!==e.getElement()}},{key:"openPoiCard",value:function(e){if(!this._options.skipPoiCard){var t=this._getMarker(e);if(t)return!0===this._options.poiViewsEnabled&&this._openPopup(t,t._poiCardContainer),t}}},{key:"openPoiView",value:function(e){var t=this._getMarker(e);if(t)return!0===this._options.poiViewsEnabled&&this._openPopup(t,t._poiViewContainer),t}},{key:"closePoiCard",value:function(e){var t=this._getMarker(e);if(t)return!0===this._options.poiViewsEnabled&&this._closePopupIfBound(t,t._poiCardContainer),t}},{key:"closePoiView",value:function(e){var t=this._getMarker(e);if(t)return!0===this._options.poiViewsEnabled&&this._closePopupIfBound(t,t._poiViewContainer),t}},{key:"_createPoiViewForMarker",value:function(e,t){var r=this;this.fire("willopenpoiview",{poiData:t.poiView});var n=function(e,t){var r=Object.assign({},t);return r.title=r.title||"",r.iconKey=e,r.data=r.data||{},r.data.user_data=r.data.user_data||Object.assign({},t),r.data.user_data.imageUrl&&(r.data.user_data.image_url=r.data.user_data.imageUrl),r.data.user_data.customView&&(r.data.user_data.custom_view=r.data.user_data.customView),r.data.user_data.customViewHeight&&(r.data.user_data.custom_view_height=r.data.user_data.customViewHeight),r}(e.iconKey,t.poiView);this._options.skipPoiCard||(e._poiCardContainer=(0,u.PoiCardContainer)(n),e._poiCardContainer.addEventListener("click",function(){getSelection().toString()||r.openPoiView(e)})),e._poiViewContainer=(0,l.PoiViewContainer)(n,this._options,function(){r._map.closePopup()}),e.on("popupopen",function(e){r._onMarkerPopupOpen(e.popup)}),e.on("popupclose",function(t){r._onMarkerPopupClose(t.popup),r._options.skipPoiCard||t.popup.getContent()===e._poiCardContainer?r._options.skipPoiCard&&e.unbindPopup():r._bindAndOffsetPopup(e,e._poiCardContainer)}),this._options.skipPoiCard||this._bindAndOffsetPopup(e,e._poiCardContainer)}},{key:"_openPopup",value:function(e,t){e.getPopup()&&e.getPopup().getContent()===t||this._bindAndOffsetPopup(e,t),e.openPopup()}},{key:"_bindAndOffsetPopup",value:function(e,t){var r=(0,s.measurePopupOnMap)(this._map,t,"wrld-marker-popup");e.bindPopup(t,{offset:[r.width/2+22,r.height/2],className:"wrld-marker-popup",closeButton:!1})}},{key:"_closePopupIfBound",value:function(e,t){e.isPopupOpen()&&e.getPopup().getContent()===t&&e.closePopup()}},{key:"_onMarkerPopupOpen",value:function(e){if(e){var t=e._container;t.id="offset-wrld-marker-popup",$(t).removeClass("animate-offset-for-anchor"),this._hasAnchors?$(t).addClass("offset-for-anchor"):$(t).removeClass("offset-for-anchor")}}},{key:"_onMarkerPopupClose",value:function(e){e&&(e._container.id="")}},{key:"_updateMarkerPopupOffset",value:function(){var e=document.getElementById("offset-wrld-marker-popup");e&&($(e).addClass("animate-offset-for-anchor"),this._hasAnchors?($(e).addClass("offset-for-anchor"),$(e).bind("transitionend",function(){$(e).removeClass("animate-offset-for-anchor")})):($(e).removeClass("offset-for-anchor"),$(e).bind("transitionend",function(){$(e).removeClass("animate-offset-for-anchor")})))}}]),t}(),h=function(e){return new f(e)};e.exports={WrldMarkerController:f,wrldMarkerController:h,EegeoMarkerController:f,eegeoMarkerController:h}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}return n(e,[{key:"on",value:function(e,t){var r=this._events[e];r||(r=[],this._events[e]=r);for(var n=0;n<r.length;++n)if(r[n]===t)return;r.push(t)}},{key:"off",value:function(e,t){var r=this._events[e];if(r)for(var n=r.length;n>0;--n)if(r[n]===t)return void r.splice(n,1)}},{key:"fire",value:function(e,t){var r=this,n=this._events[e];n&&n.forEach(function(n){n(Object.assign({},t,{type:e,target:r}))})}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(t,r,n,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._searchbar=t,this._addMarkerForSearchResult=r,this._removeMarkerForSearchResult=n,this._updateMarkerZIndexOffset=i,this._sourceToLocalIds={},this._localToSourceIds={},this._searchbar.on("searchresultsupdate",function(e){return o._addMarkersFromJSON(e.results)}),this._searchbar.on("searchresultsclear",function(){return o._clearMarkers()})}return n(e,[{key:"removeMarker",value:function(e){if(e in this._localToSourceIds){var t=this._localToSourceIds[e];delete this._sourceToLocalIds[t],delete this._localToSourceIds[e]}}},{key:"getLocalIdFromSourceId",value:function(e){return e in this._sourceToLocalIds?this._sourceToLocalIds[e]:null}},{key:"_addMarkersFromJSON",value:function(e){var t=this,r=Object.assign({},this._localToSourceIds),n=0;if(Array.isArray(e))e.forEach(function(e){var r=e.id;t._addMarkerForSearchResult(r,e,n--)});else for(var i in e){var o=e[i].sourceId;if(o in this._sourceToLocalIds)delete r[this._sourceToLocalIds[o]],this._updateMarkerZIndexOffset(i,n--);else this._sourceToLocalIds[o]=i,this._localToSourceIds[i]=o,this._addMarkerForSearchResult(i,e[i],n--)}for(var a in r){var s=r[a];this._removeMarkerForSearchResult(a,s)}}},{key:"_clearMarkers",value:function(){for(var e in this._localToSourceIds){var t=this._localToSourceIds[e];this._removeMarkerForSearchResult(e,t)}}}]),e}();t.default=i},function(e,t,r){(function(t,n){var i;
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
i=function(){"use strict";function e(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,a=void 0,s=void 0,u=function(e,t){v[o]=e,v[o+1]=t,2===(o+=2)&&(s?s(_):k())},l="undefined"!=typeof window?window:void 0,c=l||{},d=c.MutationObserver||c.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(_,1)}}var v=new Array(1e3);function _(){for(var e=0;e<o;e+=2){(0,v[e])(v[e+1]),v[e]=void 0,v[e+1]=void 0}o=0}var m,y,g,b,k=void 0;function w(e,t){var r=arguments,n=this,i=new this.constructor(I);void 0===i[C]&&K(i);var o,a=n._state;return a?(o=r[a-1],u(function(){return R(a,i,o,n._result)})):F(n,i,e,t),i}function M(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(I);return S(t,e),t}f?k=function(){return t.nextTick(_)}:d?(y=0,g=new d(_),b=document.createTextNode(""),g.observe(b,{characterData:!0}),k=function(){b.data=y=++y%2}):h?((m=new MessageChannel).port1.onmessage=_,k=function(){return m.port2.postMessage(0)}):k=void 0===l?function(){try{var e=r(8);return a=e.runOnLoop||e.runOnContext,function(){a(_)}}catch(e){return p()}}():p();var C=Math.random().toString(36).substring(16);function I(){}var T=void 0,P=1,A=2,O=new L;function E(e){try{return e.then}catch(e){return O.error=e,O}}function x(t,r,n){r.constructor===t.constructor&&n===w&&r.constructor.resolve===M?function(e,t){t._state===P?j(e,t._result):t._state===A?N(e,t._result):F(t,void 0,function(t){return S(e,t)},function(t){return N(e,t)})}(t,r):n===O?N(t,O.error):void 0===n?j(t,r):e(n)?function(e,t,r){u(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?S(e,r):j(e,r))},function(t){n||(n=!0,N(e,t))},e._label);!n&&i&&(n=!0,N(e,i))},e)}(t,r,n):j(t,r)}function S(e,t){var r;e===t?N(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=t)||"object"==typeof r&&null!==r?x(e,t,E(t)):j(e,t)}function D(e){e._onerror&&e._onerror(e._result),B(e)}function j(e,t){e._state===T&&(e._result=t,e._state=P,0!==e._subscribers.length&&u(B,e))}function N(e,t){e._state===T&&(e._state=A,e._result=t,u(D,e))}function F(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+P]=r,i[o+A]=n,0===o&&e._state&&u(B,e)}function B(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?R(r,n,i,o):i(o);e._subscribers.length=0}}function L(){this.error=null}var V=new L;function R(t,r,n,i){var o=e(n),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if((a=function(e,t){try{return e(t)}catch(e){return V.error=e,V}}(n,i))===V?(l=!0,s=a.error,a=null):u=!0,r===a)return void N(r,new TypeError("A promises callback cannot return that same promise."))}else a=i,u=!0;r._state!==T||(o&&u?S(r,a):l?N(r,s):t===P?j(r,a):t===A&&N(r,a))}var U=0;function K(e){e[C]=U++,e._state=void 0,e._result=void 0,e._subscribers=[]}function W(e,t){this._instanceConstructor=e,this.promise=new e(I),this.promise[C]||K(this.promise),i(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):N(this.promise,new Error("Array Methods must be provided an Array"))}function H(e){this[C]=U++,this._result=this._state=void 0,this._subscribers=[],I!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(e,t){try{t(function(t){S(e,t)},function(t){N(e,t)})}catch(t){N(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function $(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=H}return W.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===T&&r<e;r++)this._eachEntry(t[r],r)},W.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===M){var i=E(e);if(i===w&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===H){var o=new r(I);x(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},W.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===T&&(this._remaining--,e===A?N(n,r):this._result[t]=r),0===this._remaining&&j(n,this._result)},W.prototype._willSettleAt=function(e,t){var r=this;F(e,void 0,function(e){return r._settledAt(P,t,e)},function(e){return r._settledAt(A,t,e)})},H.all=function(e){return new W(this,e).promise},H.race=function(e){var t=this;return i(e)?new t(function(r,n){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(r,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},H.resolve=M,H.reject=function(e){var t=new this(I);return N(t,e),t},H._setScheduler=function(e){s=e},H._setAsap=function(e){u=e},H._asap=u,H.prototype={constructor:H,then:w,catch:function(e){return this.then(null,e)}},$(),H.polyfill=$,H.Promise=H,H},e.exports=i()}).call(this,r(6),r(7))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){},function(e,t,r){r(10),e.exports=self.fetch.bind(self)},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};c.prototype.append=function(e,t){e=s(e),t=u(t);var r=this.map[e];this.map[e]=r?r+","+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=u(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),l(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),l(e)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},v.call(_.prototype),v.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];y.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=_,e.Response=y,e.fetch=function(e,r){return new Promise(function(n,i){var o=new _(e,r),a=new XMLHttpRequest;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new y(i,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function h(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&n(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,r,n=d(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=f(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var r,n,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),o.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.measurePopupOnMap=function(e,t,r){var n=e.getPixelBounds(),i=L.popup({className:r,offset:n.getSize()}).setLatLng(e.getCenter()).setContent(t);e.addLayer(i);var o={width:i._container.offsetWidth,height:i._container.offsetHeight};return e.removeLayer(i),o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoiCardContainer=void 0;var n,i=r(1),o=(n=i)&&n.__esModule?n:{default:n},a=r(0);t.PoiCardContainer=function(e){var t=document.createElement("div");t.className="poi-card-popup";var r=(0,a.addDivWithClassName)("poi-icon",t),n=o.default.getIconUrlForKey(e.iconKey);r.style.backgroundImage="url("+n+")";var i=(0,a.addDivWithClassName)("poi-detail",t);return(0,a.addDivWithClassName)("poi-title",i,e.title),e.data.user_data&&e.data.user_data.address&&(0,a.addDivWithClassName)("poi-address",i,e.data.user_data.address),"yelp"===e.source?function(e,t){var r="yelp-review-icon yelp-stars-"+e.user_data.rating.toString().replace(".5","-half");(0,a.addDivWithClassName)(r,t),(0,a.addDivWithClassName)("yelp-review",t,e.user_data.review_count+" reviews on "),(0,a.addDivWithClassName)("yelp-logo",t)}(e.data,i):e.tags&&((0,a.addDivWithClassName)("poi-tag-icon",i),(0,a.addDivWithClassName)("poi-tags",i,e.tags.join(", "))),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoiViewContainer=void 0;var n=r(14),i=r(15),o=r(16),a=r(17),s=r(18),u=r(0);t.PoiViewContainer=function(e,t,r){void 0===e.data.user_data&&(e.data.user_data={});var l=(0,u.createDivWithClassName)("poi-view-popup");l.id="eegeo-poi-card-popup",(0,u.addDivWithClassName)("poi-view-content",l).appendChild((0,n.getPoiViewHeader)(e,r));var c="poi-view-content",d="hidden";t.customViewScrollingEnabled&&e.data.user_data.custom_view||(c+=" scrollable",d="auto");var f,h=(0,u.addDivWithClassName)(c,l),p=document.getElementById("map").clientHeight;if(h.style.maxHeight=p-150+"px",h.style.overflowY=d,e.data.user_data.custom_view)h.appendChild(function(e,t){var r=(0,u.createDivWithClassName)("poi-view-html-container");void 0!==e.user_data.custom_view_height?r.style.height=e.user_data.custom_view_height+"px":t.customViewDefaultHeight&&(r.style.height=t.customViewDefaultHeight+"px");var n=document.createElement("iframe"),i=e.user_data.custom_view;if("b64_message"===t.customViewDataDeliveryMethod&&(n.onload=function(){var t=encodeURIComponent(JSON.stringify(e));n.contentWindow.postMessage("poid"+btoa(t),"*")}),"query_string"===t.customViewDataDeliveryMethod){var o=-1===i.indexOf("?")?"?":"&";i=i+o+"poi="+encodeURIComponent(JSON.stringify(e))}return n.src=i,n.frameBorder="0",n.className="poi-view-html",n.scrolling=t.customViewScrollingEnabled?"yes":"no",r.appendChild(n),r}(e.data,t));else if(e.data.user_data.image_url){var v=(0,u.addDivWithClassName)("poi-view-content-column",h),_=(0,i.getPoiViewImage)(e.data.user_data.image_url,"yelp"===e.source);v.appendChild(_),h=v;var m=e.data.user_data.custom_view_height;void 0!==m&&(h.style.height=m+"px"),((f=e.data).user_data.address||f.user_data.phone||f.user_data.web||f.user_data.email||f.user_data.facebook||f.user_data.twitter)&&h.appendChild((0,o.getPoiViewDetails)(e.data));var y=(0,a.getPoiViewTags)(e.tags);y&&h.appendChild(y);var g=(0,s.getPoiViewDescription)(e);g&&h.appendChild(g)}return l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPoiViewHeader=void 0;var n,i=r(1),o=(n=i)&&n.__esModule?n:{default:n},a=r(0);t.getPoiViewHeader=function(e,t){var r=e.iconKey,n=o.default.getIconUrlForKey(r),i=(0,a.createDivWithClassName)("poi-view-header");(0,a.addDivWithClassName)("tag-icon",i).style.backgroundImage="url("+n+")";var s=(0,a.createButtonWithClassName)("close-button");return s.onclick=t,i.appendChild(s),(0,a.addDivWithClassName)("title-text",i,e.title),i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPoiViewImage=void 0;var n=r(0);t.getPoiViewImage=function(e,t){var r=e&&t?e.replace(/\/ms.jpg$/,"/348s.jpg"):e,i=(0,n.createDivWithClassName)("poi-view-image-container"),o=(0,n.addDivWithClassName)("poi-view-image",i);return r&&(o.style.backgroundImage="url("+r+")"),i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPoiViewDetails=void 0;var n=r(0),i=function(e,t,r,i){var o=(0,n.createElementWithClassName)("a",e);return o.href=(0,n.ensureProtocolInUrl)(r),o.target=i,t.appendChild(o),o};t.getPoiViewDetails=function(e){var t=(0,n.createDivWithClassName)("poi-view-details");if(e.user_data.address&&(0,n.addDivWithClassName)("address-text",t,e.user_data.address),e.user_data.phone&&(0,n.addDivWithClassName)("phone-text",t,e.user_data.phone),e.user_data.web){var r=i("web-text",t,(0,n.ensureProtocolInUrl)(e.user_data.web),"_blank"),o=document.createTextNode(e.user_data.web);r.appendChild(o)}if(e.user_data.email||e.user_data.facebook||e.user_data.twitter){var a=(0,n.addDivWithClassName)("link-icons",t);e.user_data.email&&i("email-icon",a,"mailto:"+e.user_data.email),e.user_data.facebook&&i("facebook-icon",a,(0,n.formatUrl)(e.user_data.facebook,"facebook.com","www.facebook.com/",!0),"_blank"),e.user_data.twitter&&i("twitter-icon",a,(0,n.formatUrl)(e.user_data.twitter,"twitter.com","twitter.com/",!0),"_blank"),t.appendChild(a)}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPoiViewTags=void 0;var n=r(0);t.getPoiViewTags=function(e){if(e&&e.length>0){var t=(0,n.createDivWithClassName)("poi-view-tags"),r=document.createTextNode(e.join(", "));return t.appendChild(r),t}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPoiViewDescription=void 0;var n=r(0);t.getPoiViewDescription=function(e){if(e.subtitle||e.data.user_data.description){var t=(0,n.createDivWithClassName)("poi-view-description-container");return e.subtitle&&(0,n.addDivWithClassName)("subtitle-text",t,e.subtitle),e.data.user_data.description&&(0,n.addDivWithClassName)("description-text",t,e.data.user_data.description),t}return null}}])});